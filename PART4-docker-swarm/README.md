# Docker Swarm

## (나의) 웹 어플리케이션 서버 배포의 변천사

### WAR를 빌드하고 톰캣에 넣어서 배포
- 장점:
- 단점:   

### JAR를 빌드하고 JAR를 실행해서 배포
- 장점:
- 단점:

### 위의 것들을 도커이미지로 만들어서 실행
- 장점:
- 단점:

## 필요한 기능
- 무중단 배포
- 스케일 관리

## 도커 스웜 소개
### 도커 엔진과 통합된 클러스터 관리
 다른 부가적인 설치 없이 도커를 설치하고 도커의 CLI를 이용하여 도커 스웜 클러스터를 구축할 수 있습니다.

### 분산 설계

### 선언적 서비스 모델

### 스케일링 (확장과 축소)

### 상태 조정(회복)

### 멀티 호스트 네트워킹 (오버레이 네트워크)

### 서비스 검색

### 로드 밸런싱

### 기본 보안

### 롤링 업데이트

## 실습
### 시나리오

쇼핑몰을 운영하고 있습니다. `쇼핑몰 프론트 서비스`는 `상품 백앤드 서버스`와 `쿠폰 백앤드 서비스`로 구성되어 있습니다. 
이 세 서비스는 각각 도커라이즈 되어있다. 노드가 세개인 도커 스웜을 이용하여 배포하여 아래의 목표를 달성해본다.

- 트래픽에 따라 스케일이 조정되어야 한다. 
- 무중단으로 배포되어야 한다.



### 도커 스웜 노드 준비
- 도커 설치
- 마스터 노드 도커 스웜 초기화
```
docker swarm init --advertise-addr 172.26.8.153
```
- 워커 노드 등록
```
docker swarm join --token SWMTKN-1-1ppzdtuuy3rpulzm34w9hyqc1d1ykl2i638igpynyvjlgf6qps-9hprisuy8zhpgjglhyw1uxddb 172.26.8.153:2377
```


### 상품 백앤드 서비스 배포


### 쿠폰 백앤드 서비스 배포

### 쇼핑몰 프론트 서비스 배포

### 테스트

### 스케일인아웃

### 서비스 무중단 업데이트

## 정리

